# KAIROS CI · Spec (non-executable)
# Этот файл не запускается GitHub Actions. Это контракт того, что должен делать .github/workflows/kairos-ci.yml

version: 1
pipeline_name: "KAIROS CI"

contract:
  - id: "Sanity verify paths (strict)"
    must_contain:
      - "08-agents/KAIROS/Makefile"
      - "08-agents/KAIROS/scripts/json_schema_check.py"
      - "08-agents/KAIROS/scripts/nr_fm.py"

  - id: "Schema self-check (strict)"
    must_contain:
      - "jsonschema.Draft202012Validator.check_schema"
      - "08-agents/KAIROS/schemas/frontmatter.schema.json"

  - id: "Fixture validate (frontmatter, if present)"
    must_contain:
      - "scripts/nr_fm.py"
      - "--schema 08-agents/KAIROS/schemas/frontmatter.schema.json"
      - "--base   08-agents/KAIROS/tests/fixtures/frontmatter"

  - id: "Make ci-validate (if present)"
    must_contain:
      - "make -C 08-agents/KAIROS ci-validate"

notes:
  - "Любые правки workflow сначала отражаем в этой спека, затем меняем .github/workflows/kairos-ci.yml"
  - "CI уронит ран, если спека и workflow разойдутся"
